(this["webpackJsonpproject-orbit"]=this["webpackJsonpproject-orbit"]||[]).push([[0],{13:function(e,t,a){},18:function(e,t,a){e.exports=a(32)},23:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(10),s=a.n(l),o=(a(13),a(2)),r=a(3),c=a(6),p=a(5),h=a(4),d=(a(23),a(1)),u=a.n(d),m=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={panel:{},multi:null,panelTypes:[]},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.setState({panel:this.props.panel,panelTypes:["Inventory","Orbit","Ship","Shortwave","System"]}),this.handleSelectMultiple=this.handleSelectMultiple.bind(this),this.handleConfirm=this.handleConfirm.bind(this),this.init=this.init.bind(this)}},{key:"init",value:function(){null===this.state.multi&&this.setState({multi:[]})}},{key:"handleSelectMultiple",value:function(e){2!==this.state.multi.length&&this.setState({multi:this.state.multi.concat(u()(e.target).children("option:selected").val())})}},{key:"handleConfirm",value:function(e){var t=this,a=this.state.multi.concat([]),n=this.state.panel;n.name=2===a.length?a:a[0],this.setState({panel:n},(function(){t.props.addPanel(t.state.panel)}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"panel panel--add-panel",inprocess:null!=this.state.multi?"inprocess":void 0,style:{gridArea:this.props.panel.col+1+" / "+(this.props.panel.row+1)+" / span "+this.props.panel.height+" / span "+this.props.panel.width},onClick:this.init},null!==this.state.multi&&i.a.createElement("label",null,i.a.createElement("div",null,"Select up to two:"),i.a.createElement("select",{className:"select select__multiple",multiple:"multiple",value:this.state.multi,onChange:function(){},onInput:this.handleSelectMultiple},this.state.panelTypes.map((function(e,t){return i.a.createElement("option",{className:"select__option",value:e,key:t},e)}))),i.a.createElement("button",{className:"button",onClick:this.handleConfirm,disabled:null!=this.state.multi&&0===this.state.multi.length?"disabled":void 0},"Confirm")))}}]),a}(i.a.Component),y=a(7),g=a.n(y),v=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement("div",{className:"panel__contents"})}}]),a}(i.a.Component),b=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement("div",{className:"panel__contents"})}}]),a}(i.a.Component),f=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement("div",{className:"panel__contents"},i.a.createElement("ul",{className:"stats-list stats-list--orbit"},i.a.createElement("li",{className:"stats-list__item"},i.a.createElement("div",null,"NAME"),i.a.createElement("div",null,"Earth 2")),i.a.createElement("li",{className:"stats-list__item"},i.a.createElement("div",null,"CODE"),i.a.createElement("div",null,"O7SH3X")),i.a.createElement("li",{className:"stats-list__item"},i.a.createElement("div",null,"SIZE"),i.a.createElement("div",null,"Medium")),i.a.createElement("li",{className:"stats-list__item"},i.a.createElement("div",null,"ENVI"),i.a.createElement("div",null,"Livable")),i.a.createElement("li",{className:"stats-list__item"},i.a.createElement("div",null,"FACT"),i.a.createElement("div",null,"Unclaimed")),i.a.createElement("br",null),i.a.createElement("li",{className:"stats-list__item"},i.a.createElement("div",null,"Gold"),i.a.createElement("div",null,Math.ceil(4*Math.random())+"/sec.")),i.a.createElement("li",{className:"stats-list__item"},i.a.createElement("div",null,"Iron"),i.a.createElement("div",null,Math.ceil(4*Math.random())+"/sec.")),i.a.createElement("li",{className:"stats-list__item"},i.a.createElement("div",null,"Coal"),i.a.createElement("div",null,Math.ceil(4*Math.random())+"/sec.")),i.a.createElement("br",null)))}}]),a}(i.a.Component),w=a(16).Resizable,E=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleDrag=function(e,t){var a=n.state.deltaPosition,i=a.x,l=a.y;n.setState({deltaPosition:{x:i+t.deltaX,y:l+t.deltaY}})},n.onStart=function(e){u()(e.target).closest(".grid").addClass("sortable-dragging-within"),n.setState({dragPosn:null,activeDrags:n.state.activeDrags+1})},n.onStop=function(e){u()(".grid.sortable-dragging-within").removeClass("sortable-dragging-within"),n.props.onChangeLayout(n.props.panel.key,n.state.deltaPosition),n.setState({dragPosn:{x:0,y:0},activeDrags:n.state.activeDrags-1})},n.onResize=function(e,t){t.element;var a=t.size,i=t.handle;n.props.onResize(n.props.panel.key,a,i)},n.onClose=function(){n.props.onClosePanel(n.props.panel.key)},n.state={dragPosn:null,activeDrags:0,deltaPosition:{x:0,y:0}},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e={onDrag:this.handleDrag,onStart:this.onStart,onStop:this.onStop},t=this.props.panel;return t.width*t.height===1?t="1x1":t.width*t.height===2?t=1===t.width?"1x2":"2x1":t.width*t.height===4&&(t="2x2"),this.props.editingEnabled?i.a.createElement(g.a,Object.assign({handle:".panel__bar",cancel:".panel__bar__close",grid:[324,324],bounds:"parent",position:this.state.dragPosn},e),i.a.createElement(w,{height:324*this.props.panel.height-24,width:324*this.props.panel.width-24,minConstraints:[300,300],maxConstraints:[624,624],onResize:this.onResize,draggableOpts:{grid:[324,324]},resizeHandles:this.props.resizeHandles},i.a.createElement("div",{className:"panel",id:this.props.panel.name,orientation:t,style:{gridArea:this.props.panel.col+1+" / "+(this.props.panel.row+1)+" / span "+this.props.panel.height+" / span "+this.props.panel.width}},i.a.createElement("div",{className:"panel__bar"},i.a.createElement("span",{className:"panel__bar__title"},this.props.panel.name),i.a.createElement("span",{className:"panel__bar__close",onClick:this.onClose}," X ")),"Inventory"===this.props.panel.name&&i.a.createElement(v,{orientation:t}),"Shortwave"===this.props.panel.name&&i.a.createElement(b,{orientation:t}),"Orbit"===this.props.panel.name&&i.a.createElement(f,{orientation:t})))):i.a.createElement("div",{className:"panel",id:this.props.panel.name,orientation:t,style:{gridArea:this.props.panel.col+1+" / "+(this.props.panel.row+1)+" / span "+this.props.panel.height+" / span "+this.props.panel.width}},i.a.createElement("div",{className:"panel__bar"},i.a.createElement("span",{className:"panel__bar__title"},this.props.panel.name)),"Inventory"===this.props.panel.name&&i.a.createElement(v,{orientation:t}),"Shortwave"===this.props.panel.name&&i.a.createElement(b,{orientation:t}),"Orbit"===this.props.panel.name&&i.a.createElement(f,{orientation:t}))}}]),a}(i.a.Component),O=a(16).Resizable,S=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleDrag=function(e,t){var a=n.state.deltaPosition,i=a.x,l=a.y;n.setState({deltaPosition:{x:i+t.deltaX,y:l+t.deltaY}})},n.onStart=function(e){u()(e.target).closest(".grid").addClass("sortable-dragging-within"),n.setState({dragPosn:null,activeDrags:n.state.activeDrags+1})},n.onStop=function(e){u()(".grid.sortable-dragging-within").removeClass("sortable-dragging-within"),n.props.onChangeLayout(n.props.panel.key,n.state.deltaPosition),n.setState({dragPosn:{x:0,y:0},activeDrags:n.state.activeDrags-1})},n.onResize=function(e,t){t.element;var a=t.size,i=t.handle;n.props.onResize(n.props.panel.key,a,i)},n.onClose=function(){n.props.onClosePanel(n.props.panel.key)},n.state={dragPosn:null,activeDrags:0,deltaPosition:{x:0,y:0}},n.handleClickTab=n.handleClickTab.bind(Object(c.a)(n)),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){}},{key:"handleClickTab",value:function(e){this.props.handleTabOpen(this.props.panel.key,u()(e.target).text())}},{key:"render",value:function(){var e=this,t={onDrag:this.handleDrag,onStart:this.onStart,onStop:this.onStop},a=this.props.panel;return a.width*a.height===1?a="1x1":a.width*a.height===2?a=1===a.width?"1x2":"2x1":a.width*a.height===4&&(a="2x2"),this.props.editingEnabled?i.a.createElement(g.a,Object.assign({handle:".panel__bar",cancel:".panel__bar > *",grid:[324,324],bounds:"parent",position:this.state.dragPosn},t),i.a.createElement(O,{height:324*this.props.panel.height-24,width:324*this.props.panel.width-24,minConstraints:[300,300],maxConstraints:[624,624],onResize:this.onResize,draggableOpts:{grid:[324,324]},resizeHandles:this.props.resizeHandles},i.a.createElement("div",{className:"panel panel--tab-panel",id:this.props.panel.name,orientation:a,style:{gridArea:this.props.panel.col+1+" / "+(this.props.panel.row+1)+" / span "+this.props.panel.height+" / span "+this.props.panel.width}},i.a.createElement("div",{className:"panel__bar"},i.a.createElement("span",{className:"panel__bar__title"},this.props.panel.name.map((function(t,a){return i.a.createElement("span",{key:a,className:t===e.props.openPanel?"selected":void 0,onClick:e.handleClickTab},t)}))),i.a.createElement("span",{className:"panel__bar__close",onClick:this.onClose}," X ")),"Inventory"===this.props.openPanel&&i.a.createElement(v,{orientation:a}),"Shortwave"===this.props.openPanel&&i.a.createElement(b,{orientation:a}),"Orbit"===this.props.openPanel&&i.a.createElement(f,{orientation:a})))):i.a.createElement("div",{className:"panel panel--tab-panel",id:this.props.panel.name,orientation:a,style:{gridArea:this.props.panel.col+1+" / "+(this.props.panel.row+1)+" / span "+this.props.panel.height+" / span "+this.props.panel.width}},i.a.createElement("div",{className:"panel__bar"},i.a.createElement("span",{className:"panel__bar__title"},this.props.panel.name.map((function(t,a){return i.a.createElement("span",{key:a,className:t===e.props.openPanel?"selected":void 0,onClick:e.handleClickTab},t)})))),"Inventory"===this.props.openPanel&&i.a.createElement(v,{orientation:a}),"Shortwave"===this.props.openPanel&&i.a.createElement(b,{orientation:a}),"Orbit"===this.props.openPanel&&i.a.createElement(f,{orientation:a}))}}]),a}(i.a.Component),k=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={panelLayout:[],baseKey:Math.random()},n.onChangeLayout=n.onChangeLayout.bind(Object(c.a)(n)),n.onResize=n.onResize.bind(Object(c.a)(n)),n.onClosePanel=n.onClosePanel.bind(Object(c.a)(n)),n.addPanel=n.addPanel.bind(Object(c.a)(n)),n.getDragHandles=n.getDragHandles.bind(Object(c.a)(n)),n.saveState=n.saveState.bind(Object(c.a)(n)),n.newPanelKey=n.newPanelKey.bind(Object(c.a)(n)),n.newBaseKey=n.newBaseKey.bind(Object(c.a)(n)),n.handleTabOpen=n.handleTabOpen.bind(Object(c.a)(n)),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e,t=JSON.parse(localStorage.getItem("panelLayout"));e=null!==t?t:[{name:"Shortwave",key:0,row:0,col:1,width:2,height:1},{name:["Inventory","Ship"],openPanel:"Inventory",key:0,row:0,col:0,width:2,height:1},{name:["Orbit","System"],openPanel:"Orbit",key:1,row:2,col:0,width:1,height:2}],this.setState({panelLayout:e})}},{key:"saveState",value:function(){localStorage.setItem("panelLayout",JSON.stringify(this.state.panelLayout))}},{key:"addPanel",value:function(e){var t=this;e.key=this.newPanelKey(),Array.isArray(e.name)&&2===e.name.length&&(e.openPanel=e.name[0]),this.setState({panelLayout:this.state.panelLayout.concat([e]),baseKey:this.newBaseKey()},(function(){t.saveState()}))}},{key:"newPanelKey",value:function(e){for(var t=this.state,a=Math.floor(100*Math.random()),n=!0;n;)a===e&&(a=Math.floor(100*Math.random())),u()(t.panelLayout).each((function(i,l){l.key!==a?i===t.panelLayout.length-1&&a!==e&&(n=!1):a=Math.floor(100*Math.random())}));return a}},{key:"newBaseKey",value:function(){for(var e=Math.random();this.state.baseKey===e;)e=Math.random();return e}},{key:"validLayout",value:function(e){var t={},a=!0;return u()(e).each((function(e,n){if((n.row+n.width>3||n.col+n.height>3)&&(a=!1),void 0===t[n.row+", "+n.col]?t[n.row+", "+n.col]=!0:a=!1,n.width>1&&(void 0===t[n.row+1+", "+n.col]?t[n.row+1+", "+n.col]=!0:a=!1),n.height>1&&(void 0===t[n.row+", "+(n.col+1)]?t[n.row+", "+(n.col+1)]=!0:a=!1),n.width>1&&n.height>1&&(void 0===t[n.row+1+", "+(n.col+1)]?t[n.row+1+", "+(n.col+1)]=!0:a=!1),!1===a)return!1})),a}},{key:"getDragHandles",value:function(e){var t=this.getLayout(),a=[];return(2===e.width||1===e.width&&0!==e.row&&t.filledSpaces.indexOf(e.row-1+", "+e.col)<0&&!(2===e.height&&t.filledSpaces.indexOf(e.row-1+", "+(e.col+1))>=0))&&a.push("w"),(2===e.height||1===e.height&&2!==e.col&&t.filledSpaces.indexOf(e.row+", "+(e.col+1))<0&&!(2===e.width&&t.filledSpaces.indexOf(e.row+1+", "+(e.col+1))>=0))&&a.push("s"),(2===e.width||1===e.width&&2!==e.row&&t.filledSpaces.indexOf(e.row+1+", "+e.col)<0&&!(2===e.height&&t.filledSpaces.indexOf(e.row+1+", "+(e.col+1))>=0))&&a.push("e"),a}},{key:"getLayout",value:function(){var e=[],t=[],a=this.state.panelLayout,n={"0, 0":0,"1, 0":0,"2, 0":0,"0, 1":0,"1, 1":0,"2, 1":0,"0, 2":0,"1, 2":0,"2, 2":0};return u()(a).each((function(e,t){n[t.row+", "+t.col]++,t.width>1&&n[t.row+1+", "+t.col]++,t.height>1&&n[t.row+", "+(t.col+1)]++,t.width>1&&t.height>1&&n[t.row+", "+t.col]++})),u()(Object.keys(n)).each((function(a,i){0===n[i]?t.push(i):e.push(i)})),{filledSpaces:e,emptySpaces:t}}},{key:"onChangeLayout",value:function(e,t){var a=this,n=this.newPanelKey,i=JSON.parse(JSON.stringify(this.state.panelLayout));u()(i).each((function(a,i){JSON.stringify(i.key)===JSON.stringify(e)&&(i.row+=Math.max(-1*i.row,Math.round(t.x/324)),i.col+=Math.max(-1*i.col,Math.round(t.y/324)),i.key=n(i.key))})),this.validLayout(i)?this.setState({panelLayout:i,baseKey:this.newBaseKey()},(function(){a.saveState()})):(u()(".panel").css({transform:"translate(0px, 0px)"}),window.setTimeout((function(){i=JSON.parse(JSON.stringify(a.state.panelLayout)),u()(i).each((function(t,a){JSON.stringify(a.key)===JSON.stringify(e)&&(a.key=n(a.key))})),a.setState({panelLayout:i})}),200))}},{key:"onResize",value:function(e,t,a){var n=this,i=this.newPanelKey,l=JSON.parse(JSON.stringify(this.state.panelLayout));u()(l).each((function(n,l){if(JSON.stringify(l.key)===JSON.stringify(e)){if("w"===a){var s=l.width+0,o=Math.floor(t.width/300);o>s?l.row-=1:o<s&&(l.row+=1)}l.width=Math.floor(t.width/300),l.height=Math.floor(t.height/300),l.key=i(l.key)}})),this.validLayout(l)&&this.setState({panelLayout:l,baseKey:this.newBaseKey()},(function(){n.saveState()}))}},{key:"handleTabOpen",value:function(e,t){var a=this,n=this.newPanelKey,i=JSON.parse(JSON.stringify(this.state.panelLayout));u()(i).each((function(a,i){JSON.stringify(i.key)===JSON.stringify(e)&&(i.openPanel=t,i.key=n(i.key))})),this.validLayout(i)&&this.setState({panelLayout:i},(function(){a.saveState()}))}},{key:"onClosePanel",value:function(e){var t=this,a=[];u()(this.state.panelLayout).each((function(t,n){n.key!==e&&a.push(n)})),this.validLayout(a)&&this.setState({panelLayout:a,baseKey:this.newBaseKey()},(function(){t.saveState()}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"grid",editingenabled:!0===this.props.editingEnabled?"enabled":void 0},this.props.editingEnabled&&this.getLayout().filledSpaces.map((function(t,a){var n=parseInt(t.substring(0,t.indexOf(", "))),l=parseInt(t.substring(t.indexOf(", ")+2));return i.a.createElement(m,{panel:{name:"",row:n,col:l,width:1,height:1},addPanel:e.addPanel,key:e.state.baseKey+a})})),this.state.panelLayout.map((function(t,a){return!Array.isArray(t.name)&&i.a.createElement(E,{panel:t,id:t.key,key:t.key,editingEnabled:e.props.editingEnabled,resizeHandles:e.getDragHandles(t),onChangeLayout:e.onChangeLayout,onResize:e.onResize,onClosePanel:e.onClosePanel})})),this.state.panelLayout.map((function(t,a){return Array.isArray(t.name)&&i.a.createElement(S,{panel:t,id:t.key,key:t.key,openPanel:t.openPanel,handleTabOpen:e.handleTabOpen,resizeHandles:e.getDragHandles(t),editingEnabled:e.props.editingEnabled,onChangeLayout:e.onChangeLayout,onResize:e.onResize,onClosePanel:e.onClosePanel})})),this.props.editingEnabled&&this.getLayout().emptySpaces.map((function(t,a){var n=parseInt(t.substring(0,t.indexOf(", "))),l=parseInt(t.substring(t.indexOf(", ")+2));return i.a.createElement(m,{panel:{name:"",row:n,col:l,width:1,height:1},addPanel:e.addPanel,key:e.state.baseKey+a})})))}}]),a}(i.a.Component),_=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={editingEnabled:!1},n.handleEditButton=n.handleEditButton.bind(Object(c.a)(n)),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){}},{key:"handleEditButton",value:function(){this.setState({editingEnabled:!this.state.editingEnabled})}},{key:"render",value:function(){return i.a.createElement("div",{className:"container"},i.a.createElement("header",{className:"header"},i.a.createElement("h1",null,"S.O.L.O. Operating System"),i.a.createElement("button",{className:"button button--inverted",onClick:this.handleEditButton},this.state.editingEnabled&&"Lock Layout",!this.state.editingEnabled&&"Unlock Layout")),i.a.createElement(k,{editingEnabled:this.state.editingEnabled}),i.a.createElement("div",{className:"panel panel--warning",orientation:"1x1"},i.a.createElement("div",{className:"panel__bar"},i.a.createElement("span",{className:"panel__bar__title"},"Warning")),i.a.createElement("div",{className:"panel__contents"},"Your copy of the ",i.a.createElement("b",null,"S.O.L.O. Operating System")," seems to be unliscensed.")))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.a3b6742f.chunk.js.map